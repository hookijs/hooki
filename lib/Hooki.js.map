{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 4bef0bd6c474bb944b80","webpack:///./src/index.js","webpack:///./src/helpers.js"],"names":["HookTypes","class","Symbol","object","func","ActionTypes","Func","Get","Set","Getter","Setter","Construct","Hooki","target","before","after","error","Error","hooks","current","Class","type","invokeClass","invokeObject","name","action","args","params","contextData","stash","self","Object","values","value","constructorParams","hook","hookName","result","data","assign","processHooks","keysToOmit","undefined","currentName","reduce","applyHook","bind","apply","instance","map","createContextData","applyOriginalFunction","get","propKey","descriptor","Reflect","getOwnPropertyDescriptor","setCurrent","decorateFunction","set","_value","construct","argumentsList","newTarget","console","log","proxy","Proxy","createTraps","createProxy","$args","replace","split","filter","Boolean","createParams","keys","obj","key","index","omit","items","toOmit","find","i","nameFunctions","flatFuncs","Array","isArray","fn","defineProperty","toString","Function","prototype","fnBody","call","isClass","test","isObject","item","is","validateHooks","bundle","forEach","property"],"mappings":"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","file":"Hooki.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Hooki\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Hooki\"] = factory();\n\telse\n\t\troot[\"Hooki\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4bef0bd6c474bb944b80","import { createParams, omit, nameFunctions, is, validateHooks } from './helpers';\n\nexport const HookTypes = {\n  class: Symbol('classHook'),\n  object: Symbol('objectHook'),\n  func: Symbol('functionHook')\n};\n\nexport const ActionTypes = {\n  Func: Symbol('funcAction'),\n  Get: Symbol('getAction'),\n  Set: Symbol('setAction'),\n  Getter: Symbol('getterAction'),\n  Setter: Symbol('setterAction'),\n  Construct: Symbol('constructAction')\n};\n\nexport default class Hooki {\n\n  constructor(target, before = {}, after = {}, error = {}) {\n    if (!target) throw new Error('Hooki: target param is required');\n    validateHooks(before, after, error);\n    this.hooks = {\n      before: nameFunctions(before),\n      after: nameFunctions(after),\n      error: nameFunctions(error)\n    };\n    this.current = {};\n\n    if (is.class(target)) {\n      this.Class = target;\n      this.type = HookTypes.class;\n      return this.invokeClass();\n    }\n\n    if (is.object(target)) {\n      this.target = target;\n      this.type = HookTypes.object;\n      return this.invokeObject();\n    }\n\n    throw new Error('Hooki: target must be object, function or class');\n  }\n\n\n\n  setCurrent(name, type, action) {\n    this.current = { name, type, action };\n  }\n\n\n\n  createContextData(func) {\n    return (args) => {\n      const params = createParams(func, args);\n      const action = this.current.action;\n      const name = this.current.name;\n\n      let contextData;\n\n      switch (action) {\n        case ActionTypes.Func:\n          contextData = {\n            name, action, params,\n            stash: { args, params },\n            self: this.target,\n            get args() {\n              return Object.values(this.params);\n            }\n          };\n          break;\n        case ActionTypes.Set:\n          contextData = {\n            name, action,\n            value: params.value,\n            stash: { value: params.value },\n            self: this.target\n          };\n          break;\n        case ActionTypes.Setter:\n          contextData = {\n            name, action, params,\n            stash: { args, params },\n            self: this.target,\n            get args() {\n              return Object.values(this.params);\n            }\n          };\n          break;\n        case ActionTypes.Get:\n          contextData = {\n            name, action,\n            value: params.value,\n            stash: { value: params.value },\n            self: this.target\n          };\n          break;\n        case ActionTypes.Getter:\n          contextData = { name, action };\n          break;\n        case ActionTypes.Construct:\n          const constructorParams = createParams(this.Class, args);\n          contextData = {\n            name, action, params: constructorParams,\n            stash: { args, params: constructorParams },\n            self: this.Class,\n            get args() {\n              return Object.values(this.params);\n            }\n          };\n          break;\n        default:\n          throw new Error(`Action ${action} do not exists!`);\n\n      }\n\n      return contextData;\n    };\n  }\n\n\n\n  applyHook(contextData, hook) {\n\n    if (contextData.error && contextData.type !== 'error') return contextData;\n\n    contextData.hookName = hook.name;\n    let result;\n\n    try {\n      result = hook(contextData);\n    } catch (error) {\n      const data = Object.assign(contextData, { error });\n      return this.processHooks('error')(data);\n    }\n\n    const keysToOmit = ['args', 'stash', 'value', 'action', 'hookName', 'type', 'instance', 'error'];\n\n    if (result === undefined || result === null) throw Error(`'${hook.name}' hook must return context data`);\n\n    return Object.assign(contextData, omit(result, ...keysToOmit));\n  }\n\n\n\n  processHooks(type) {\n    return (data) => {\n      const contextData = Object.assign(data, { type });\n      const currentName = this.current.name;\n      const hooks = this.hooks[type][currentName] || [];\n      return hooks.reduce(this.applyHook.bind(this), contextData);\n    };\n  }\n\n\n\n  applyOriginalFunction(func) {\n    return (data) => {\n      let args;\n\n      if (this.current.action === ActionTypes.Func) {\n        args = data.args;\n      }\n\n      if (this.current.action === ActionTypes.Construct) {\n        args = [data.args];\n      }\n\n      if (this.current.action === ActionTypes.Get || this.current.action === ActionTypes.Set) {\n        args = [data.value];\n      }\n      const result = func.apply(this.target, args);\n\n      if (result === undefined || result === null) {\n        return data;\n      }\n\n      if (this.current.action === ActionTypes.Construct) {\n        return Object.assign({}, omit(data, 'args'), { instance: this.target });\n      }\n\n      return Object.assign({}, omit(data, 'args'), { result });\n    };\n  }\n\n\n\n  decorateFunction(func) {\n    const self = this;\n\n    return (...args) => {\n      const [contextData] = [args]\n        .map(self.createContextData(func))\n        .map(self.processHooks('before'))\n        .map(self.applyOriginalFunction(func))\n        .map(self.processHooks('after'));\n\n      return contextData.result;\n    };\n  }\n\n\n\n  createTraps() {\n    return {\n\n      get: (target, propKey) => {\n        const descriptor = Reflect.getOwnPropertyDescriptor(target, propKey);\n\n        if (descriptor === undefined || descriptor === null) return undefined;\n\n        if (descriptor.get) {\n          const func = (value) => { return value(); };\n          this.setCurrent(propKey, 'get', ActionTypes.Getter);\n          return this.decorateFunction(descriptor.get)(func);\n        }\n\n        if (typeof descriptor.value === 'function') {\n          this.setCurrent(propKey, 'get', ActionTypes.Func);\n          const func = target[propKey];\n          return this.decorateFunction(func);\n        }\n\n        this.setCurrent(propKey, 'get', ActionTypes.Get);\n        function func(value) { return value; } // TODO: change to arrow function\n\n        return this.decorateFunction(func)(target[propKey]);\n\n      },\n\n\n\n      set: (target, propKey, _value) => {\n        this.setCurrent(propKey, 'set');\n        const descriptor = Reflect.getOwnPropertyDescriptor(target, propKey);\n\n        if (descriptor.set) {\n          this.setCurrent(propKey, 'set', ActionTypes.Setter);\n          this.decorateFunction(descriptor.set)(_value);\n          return true;\n        }\n\n        this.setCurrent(propKey, 'set', ActionTypes.Set);\n        function func(value) {\n          target[propKey] = value;\n          return true;\n        };\n        this.decorateFunction(func)(_value);\n        return true;\n\n      },\n\n\n      construct(target, argumentsList, newTarget) {\n        console.log(target, argumentsList, newTarget);\n      }\n    };\n  }\n\n\n\n  createProxy(target) {\n    this.proxy = new Proxy(this.target, this.createTraps());\n    return this.proxy;\n  }\n\n\n\n  invokeObject() {\n    return this.createProxy(this.target);\n  }\n\n\n\n  invokeClass() {\n    return new Proxy(this.Class, {\n      construct: (target, argumentsList, newTarget) => {\n        this.setCurrent('construct', 'get', ActionTypes.Construct);\n        const func = (args) => {\n          this.target = new this.Class(...args);\n          return args;\n        };\n\n        this.decorateFunction(func)(...argumentsList);\n\n        return this.createProxy(this.target);\n      }\n    });\n  }\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","const $args = (func) =>\n  (func + '')\n    .replace(/[/][/].*$/mg, '')\n    .replace(/\\s+/g, '')\n    .replace(/[/][*][^/*]*[*][/]/g, '')\n    .split(/\\)[\\{=]/, 1)[0]\n    .replace(/^[^(]*[(]/, '')\n    .replace(/=[^,]+/g, '')\n    .split(',')\n    .filter(Boolean);\n\nexport const createParams = (func, args) => {\n  const keys = $args(func);\n\n  return keys.reduce((obj, key, index) => {\n    obj[key] = args[index];\n    return obj;\n  }, {});\n};\n\nexport const omit = (obj, ...items) => {\n  return Object.keys(obj).reduce((data, key) =>{\n    const toOmit = items.find(i => i === key);\n\n    if (!toOmit) {\n      data[key] = obj[key];\n    }\n    return data;\n  }, {});\n};\n\nexport const nameFunctions = (hooks) => {\n  const flatFuncs = (obj) => {\n    if (typeof obj === 'object' && !Array.isArray(obj)) {\n      return Object.keys(obj).map(key => obj[key]);\n    }\n    return obj;\n  };\n  return Object\n    .keys(hooks)\n    .reduce((data, key) => {\n      data[key] = flatFuncs(hooks[key])\n        .map((fn, index) => {\n          if (fn && !fn.name) {\n            Object.defineProperty(fn, 'name', { value: `hook-${ index + 1 }` });\n          }\n          return fn;\n        });\n      return data;\n    }, {});\n};\n\n// Type Check\n\nconst toString = Function.prototype.toString;\n\nconst fnBody = (fn) => {\n  return toString.call(fn).replace(/^[^{]*{\\s*/, '').replace(/\\s*}[^}]*$/, '');\n};\n\nconst isClass = (fn) => {\n  return (typeof fn === 'function' &&\n          (/^class\\s/.test(toString.call(fn)) ||\n            (/classCallCheck\\(/.test(fnBody(fn)))) // babel.js\n          );\n};\n\nconst isObject = (item) => {\n  return (typeof item === 'object' && !Array.isArray(item) && item !== null);\n};\n\nexport const is = {\n  class: isClass,\n  object: isObject\n};\n\n// hook validation\n\nexport const validateHooks = (...bundle) => {\n  bundle.forEach(hooks => {\n    if (!is.object(hooks)) {\n      throw new Error('Hooki: bundle hooks must be an object');\n    }\n\n    for (const key of Object.keys(hooks)) {\n      const property = hooks[key];\n      if (is.object(property)) {\n        return true;\n      } else if (Array.isArray(property)) {\n        property.forEach(item => {\n          if (!typeof item === 'function') {\n            throw new Error('Hooki: hook must be a function!');\n          }\n        });\n        return true;\n      }\n\n      throw new Error('Hooki: invalid schema for bundle hooks!');\n    }\n    return true;\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/helpers.js"],"sourceRoot":""}