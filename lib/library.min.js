!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Library",[],e):"object"==typeof exports?exports.Library=e():t.Library=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var r=[],n=!0,o=!1,a=void 0;try{for(var u,c=t[Symbol.iterator]();!(n=(u=c.next()).done)&&(r.push(u.value),!e||r.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{!n&&c.return&&c.return()}finally{if(o)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(1),c={class:Symbol("classHook"),object:Symbol("objectHook"),func:Symbol("functionHook")},i={Func:Symbol("funcAction"),Get:Symbol("getAction"),Set:Symbol("setAction"),Getter:Symbol("getterAction"),Setter:Symbol("setterAction")},s=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n(this,t),this.hooks={before:(0,u.nameFunctions)(r),after:(0,u.nameFunctions)(o)},this.current={},u.is.class(e))return this.Class=e,this.type=c.class,this.invokeClass();if(u.is.object(e))return this.target=e,this.type=c.object,this.invokeFunction();throw new Error("Hooki: target must be object, function or class")}return a(t,[{key:"setCurrent",value:function(t,e,r){this.current={name:t,type:e,action:r}}},{key:"createContextData",value:function(t){var e=this;return function(r){var n=(0,u.createParams)(t,r),o=e.current.action,a=e.current.name;switch(o){case i.Func:return{name:a,action:o,params:n,stash:{args:r,params:n},self:e.target,get args(){return Object.values(this.params)}};case i.Set:return{name:a,action:o,value:n.value,stash:{value:n.value},self:e.target};case i.Setter:return{name:a,action:o,params:n,stash:{args:r,params:n},self:e.target,get args(){return Object.values(this.params)}};case i.Get:return{name:a,action:o,value:n.value,stash:{value:n.value},self:e.target};case i.Getter:return{name:a,action:o};default:throw new Error("Action "+o+" do not exists!")}}}},{key:"applyHook",value:function(t,e){t.hookName=e.name;var r=e(t),n=["args","stash","value","action","hookName","type"];if(void 0===r||null===r)throw Error("'"+e.name+"' hook must return context data");return Object.assign(t,u.omit.apply(void 0,[r].concat(n)))}},{key:"processHooks",value:function(t){var e=this;return function(r){var n=Object.assign(r,{type:t}),o=e.current.name;return(e.hooks[t][o]||[]).reduce(e.applyHook,n)}}},{key:"applyOriginalFunction",value:function(t){var e=this;return function(r){var n=void 0;e.current.action===i.Func&&(n=r.args),e.current.action!==i.Get&&e.current.action!==i.Set||(n=[r.value]);var o=t.apply(e.target,n);return void 0===o||null===o?r:Object.assign({},r,{result:o})}}},{key:"decorateFunction",value:function(t){var e=this;return function(){for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var u=[n].map(e.createContextData(t)).map(e.processHooks("before")).map(e.applyOriginalFunction(t)).map(e.processHooks("after"));return o(u,1)[0].result}}},{key:"createTraps",value:function(){var t=this;return{get:function(e,r){function n(t){return t}var o=Reflect.getOwnPropertyDescriptor(e,r);if(void 0!==o&&null!==o){if(o.get){var a=function(t){return t()};return t.setCurrent(r,"get",i.Getter),t.decorateFunction(o.get)(a)}if("function"==typeof o.value){t.setCurrent(r,"get",i.Func);var u=e[r];return t.decorateFunction(u)}return t.setCurrent(r,"get",i.Get),t.decorateFunction(n)(e[r])}},set:function(e,r,n){function o(t){return e[r]=t,!0}t.setCurrent(r,"set");var a=Reflect.getOwnPropertyDescriptor(e,r);return a.set?(t.setCurrent(r,"set",i.Setter),t.decorateFunction(a.set)(n),!0):(t.setCurrent(r,"set",i.Set),t.decorateFunction(o)(n),!0)}}}},{key:"createProxy",value:function(t){return this.proxy=new Proxy(this.target,this.createTraps()),this.proxy}},{key:"invokeFunction",value:function(){return this.createProxy(this.target)}},{key:"invokeClass",value:function(){var t=this;return function(){function e(){n(this,e);for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];return t.target=new(Function.prototype.bind.apply(t.Class,[null].concat(o))),t.createProxy(t.target)}return a(e,[{key:Symbol.toStringTag,get:function(){return"Decorator"}}],[{key:Symbol.hasInstance,value:function(e){if(e.toString){if(/Decorator/.test(e.toString()))return!0}return e instanceof t.Class}}]),e}()}}]),t}();e.default=s,t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t){return(t+"").replace(/[\/][\/].*$/gm,"").replace(/\s+/g,"").replace(/[\/][*][^\/*]*[*][\/]/g,"").split(/\)[\{=]/,1)[0].replace(/^[^(]*[(]/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean)},a=(e.createParams=function(t,e){return o(t).reduce(function(t,r,n){return t[r]=e[n],t},{})},e.omit=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return Object.keys(t).reduce(function(e,n){return r.find(function(t){return t===n})||(e[n]=t[n]),e},{})},e.nameFunctions=function(t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r].map(function(t,e){return t&&!t.name&&Object.defineProperty(t,"name",{value:"hook-"+(e+1)}),t}),e},{})},Function.prototype.toString),u=function(t){return a.call(t).replace(/^[^{]*{\s*/,"").replace(/\s*}[^}]*$/,"")},c=function(t){return"function"==typeof t&&(/^class\s/.test(a.call(t))||/classCallCheck\(/.test(u(t)))},i=function(t){return"object"===(void 0===t?"undefined":n(t))&&!Array.isArray(t)&&null!==t};e.is={class:c,object:i}}])});